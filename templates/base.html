{% load static %}
<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>  
    {% block titulo %}
    Gestión electoral
    {% endblock titulo %}
</title>

  {% block link1 %}

  {% endblock link1 %}
  {% block linkprincipal %}

  <!-- Google Font: Source Sans Pro -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-4bw+/aepP/YC94hEpVNVgiZdgIC5+VKNBQNGCHeKRQN+PtmoHDEXuppvnDJzQIu9" crossorigin="anonymous">

  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,400i,700&display=fallback">
  <!-- Font Awesome -->
  <link rel="stylesheet" href="{% static "plugins/fontawesome-free/css/all.min.css" %}">
  <!-- Ionicons -->
  <link rel="stylesheet" href="https://code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css">
  <!-- Tempusdominus Bootstrap 4 -->
  <link rel="stylesheet" href="{% static "plugins/tempusdominus-bootstrap-4/css/tempusdominus-bootstrap-4.min.css" %}">
  <!-- iCheck -->
  <link rel="stylesheet" href="{% static "plugins/icheck-bootstrap/icheck-bootstrap.min.css" %}">
  <!-- JQVMap -->
  <link rel="stylesheet" href="{% static "plugins/jqvmap/jqvmap.min.css" %}">
  <!-- Theme style -->
  <link rel="stylesheet" href="{% static "dist/css/adminlte.min.css" %}">
  <!-- overlayScrollbars -->
  <link rel="stylesheet" href="{% static "plugins/overlayScrollbars/css/OverlayScrollbars.min.css" %}">
  <!-- Daterange picker -->
  <link rel="stylesheet" href="{% static "plugins/daterangepicker/daterangepicker.css" %}">
  <!-- summernote -->
  <link rel="stylesheet" href="{% static "plugins/summernote/summernote-bs4.min.css" %}">
  <script src="https://kit.fontawesome.com/78350df3d2.js" crossorigin="anonymous"></script>
  <link rel="stylesheet" href=" {% static 'css/style.css' %}?v1.829">
  <link rel="stylesheet" href="https://cdn.datatables.net/1.13.6/css/dataTables.bootstrap5.min.css">
  <link href="https://cdn.datatables.net/v/bs5/jq-3.7.0/jszip-3.10.1/dt-1.13.6/b-2.4.2/b-html5-2.4.2/b-print-2.4.2/datatables.min.css" rel="stylesheet">

{% endblock linkprincipal %}
  {% block link %}{% endblock link %}
</head>
<body class="hold-transition sidebar-mini layout-fixed">
<div class="wrapper">

  <!-- Preloader -->
  <!-- <div class="preloader flex-column justify-content-center align-items-center">
    <img class="animation__shake" src="{% static "img/system/Morena.png" %}" alt="AdminLTELogo" height="200" width="200">
  </div> -->
  <div class="preloader flex-column justify-content-center align-items-center">
    <img class="animation__shake" src="{% static "img/verde/verde nuevo.png" %}" alt="AdminLTELogo" height="200" width="200">
  </div>
  <!-- Navbar -->
  <nav class="main-header navbar navbar-expand navbar-white navbar-light custom-navbar">
    <!-- Left navbar links -->
    <ul class="navbar-nav">
      <li class="nav-item">
        <a class="nav-link" data-widget="pushmenu" href="#" role="button"><i class="fas fa-bars"></i></a>
      </li>
      
    </ul>

    <!-- Right navbar links -->
    <ul class="navbar-nav ml-auto">
      <!-- Navbar Search -->
     

      <!-- Messages Dropdown Menu -->
   <li class="nav-item dropdown">
     

      <!-- Notifications Dropdown Menu -->
    
      <li class="nav-item">
        <a class="nav-link" data-widget="fullscreen" href="#" role="button">
          <i class="fas fa-expand-arrows-alt"></i>
        </a>
      </li>
      
      <li class="nav-item dropdown no-arrow">
        <a class="nav-link dropdown-toggle" href="#" id="userDropdown" role="button"
            data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
            <span class="mr-2 d-none d-lg-inline text-gray-600 ">{{ user.username }} </span>
            
        </a>
        <!-- Dropdown - User Information -->
        <div class="dropdown-menu dropdown-menu-right shadow animated--grow-in"
            aria-labelledby="userDropdown">
            <a class="dropdown-item" href="#">
                <i class="fas fa-user fa-sm fa-fw mr-2 text-gray-400"></i>
                <strong style='color:#A3835F;'>Usuario: </strong>{{ user.username }}
            </a>
            <a class="dropdown-item" href="#">
              <i class="fas fa-users fa-sm fa-fw mr-2 text-gray-400"></i>
                <strong style='color:#A3835F;'>Grupo: </strong>{{ user.groups.first.name }}
            </a>
            <a class="dropdown-item" href="#">
              <i class="fas fa-map-marker-alt fa-sm fa-fw mr-2 text-gray-400"></i>
              <strong style='color:#A3835F;'>Secciones: </strong>
              {% if user.is_in_special_groups %}
                  Todas las secciones
              {% else %}
                  {% for seccion in user.seccion.all %}
                      {{ seccion.nombre }}
                      {% if not forloop.last %}, {% endif %}
                  {% empty %}
                      Ninguna
                  {% endfor %}
              {% endif %}
          </a>
            <div class="dropdown-divider"></div>
            <a class="dropdown-item" href="{% url 'exit' %}">
                <i class="fas fa-sign-out-alt fa-sm fa-fw mr-2 text-gray-400"></i>
                Cerrar sesión
            </a>
        </div>
    </li>    </ul>
  </nav>
  <!-- /.navbar -->

  <!-- Main Sidebar Container -->
  <aside class="main-sidebar sidebar-dark-primary elevation-4 custom-sidebar">
    <!-- Brand Logo -->
    <!-- <a href="{% url "menu" %}" class="brand-link">
      <img src="{% static "img/system/Logo_morena-1.png" %}" alt="AdminLTE Logo" class="brand-image img-circle elevation-3" style="opacity: .8">
      <span class="brand-text font-weight-light">{% if candidato_config %}
        {{candidato_config.nombre_candidato}}
      {% else %}
      Nombre de Campaña
      {% endif %}</span>
    </a> -->

    <a href="{% url "menu" %}" class="brand-link">
      <img src="{% static "img/verde/verde nuevo.png" %}" alt="AdminLTE Logo" class="brand-image img-circle elevation-3" style="opacity: .8">
      <span class="brand-text font-weight-light">{% if candidato_config %}
        {{candidato_config.nombre_candidato}}
      {% else %}
      Brayan Nava
      {% endif %}</span>
    </a> 

    <!-- Sidebar -->
    <div class="sidebar">
      <!-- Sidebar user panel (optional) -->
      

      <!-- Sidebar Menu -->
      <nav class="mt-2">


        <ul class="nav nav-pills nav-sidebar flex-column" data-widget="treeview" role="menu" data-accordion="false">
          
            <!-- Add icons to the links using the .nav-icon class
               with font-awesome or any other icon font library -->

    
          
          <!-- Add icons to the links using the .nav-icon class
               with font-awesome or any other icon font library -->
            <li class="nav-item">
            <a href=" {% url 'menu' %}" class="nav-link {% if navbar == 'home' %}active first-li{% endif %} ">
              <i class="nav-icon fas fa-th"></i>
              <p>
                Menú
                <!-- <span class="right badge badge-danger">New</span> -->
              </p>
            </a>
          </li>

          <li class="nav-item">
            <a href="{% url 'buscador' %}" class="nav-link {% if navbar == 'buscador' %}active first-li{% endif %} ">
              <i class="nav-icon fas fa-search"></i>
              <p>
                Buscador Global
                <!-- <span class="right badge badge-danger">New</span> -->
              </p>
            </a>
          </li>

          {% if 'Administrador' in user_groups or 'Candidato' in user_groups  %}
              <li class="nav-item {% if navbar == 'gestion_user' %}menu-is-opening menu-open{% endif %}">
                <a href="#" class="nav-link {% if navbar == 'gestion_user' %}active first-li{% endif %}">
                  <i class="nav-icon fas fa-users"></i>
                  <p>
                    Gestión de Usuarios
                    <i class="right fas fa-angle-left"></i>
                  </p>
                </a>
                <ul class="nav nav-treeview">
                  <li class="nav-item">
                    <a href="{% url "users_list" %}" class="nav-link {% if seccion == 'ver_usuarios' %}active {% endif %}">
                      <i class="far fa-circle nav-icon"></i>
                      <p>Ver Administradores</p>
                    </a>
                  </li>
                  <li class="nav-item">
                    <a href="{% url "users_list_cordi_gene" %}" class="nav-link {% if seccion == 'ver_coordinadores' %}active {% endif %}">
                      <i class="far fa-circle nav-icon"></i>
                      <p>Ver Coordinadores Generales</p>
                    </a>
                  </li>

                  <li class="nav-item">
                    <a href="{% url "UserListViewCordiPromo"  %}" class="nav-link {% if seccion == 'ver_promotores' %}active {% endif %}">
                      <i class="far fa-circle nav-icon"></i>
                      <p>Ver Promotores</p>
                    </a>
                  </li>

                </ul>
              </li>




              <li class="nav-item {% if navbar == 'seccion' %}menu-is-opening menu-open{% endif %}">
                <a href="#" class="nav-link {% if navbar == 'seccion' %}active first-li{% endif %}">
                  <i class="nav-icon fas fa-map-marker-alt"></i>
                  <p>
                    Secciones y Calles
                    <i class="fas fa-angle-left right"></i>
                  </p>
                </a>
                <ul class="nav nav-treeview">
                  <li class="nav-item">
                    <a href="{% url "seccion_list" %}" class="nav-link {% if seccion == 'secciones' %}active {% endif %}">
                      <i class="far fa-circle nav-icon"></i>
                      <p>Ver Secciones</p>
                    </a>
                  </li>

                  <li class="nav-item">
                    <a href="{% url "calle_list" %}" class="nav-link {% if seccion == 'calle' %}active {% endif %}">
                      <i class="far fa-circle nav-icon"></i>
                      <p>Ver Calles</p>
                    </a>
                  </li>
              
                </ul>
              
              </li>

          <li class="nav-item {% if navbar == 'estadisticas' %}menu-is-opening menu-open{% endif %}">
          <a href="#" class="nav-link {% if navbar == 'estadisticas' %}active first-li{% endif %}">
            <i class="nav-icon fas fa-chart-pie"></i>  
              <p>
              Estadisticas
              <i class="fas fa-angle-left right"></i>
            </p>
          </a>
          <ul class="nav nav-treeview">
            <li class="nav-item">
              <a href="{% url "estadisticas" %}" class="nav-link {% if seccion == 'esta_general' %}active {% endif %}">
                <i class="far fa-circle nav-icon"></i>
                <p>Generales</p>
              </a>
            </li>
         
          </ul>
          <ul class="nav nav-treeview">
            <li class="nav-item">
              <a href="{% url "voto_seguro" %}" class="nav-link {% if seccion == 'voto' %}active {% endif %}">
                <i class="far fa-circle nav-icon"></i>
                <p>Voto Seguro</p>
              </a>
            </li>
         
          </ul>
          <ul class="nav nav-treeview">
            <li class="nav-item">
              <a href="{% url "estadisticasSolicitud" %}" class="nav-link {% if seccion == 'esta_soli' %}active {% endif %}">
                <i class="far fa-circle nav-icon"></i>
                <p>Solicitudes y Problemas</p>
              </a>
            </li>
         
          </ul>
          <ul class="nav nav-treeview">
            <li class="nav-item">
              <a href="{% url "lista-cumple" %}" class="nav-link {% if seccion == 'cumple' %}active {% endif %}">
                <i class="far fa-circle nav-icon"></i>
                <p>Cumpleaños</p>
              </a>
            </li>
         
          <li class="nav-item">
              <a href="{% url 'seccion-list'  %}" class="nav-link {% if seccion == 'seccion-list' %}active {% endif %}">
                <i class="far fa-circle nav-icon"></i>
                <p>Secciones</p>
              </a>
            </li>

            <li class="nav-item">
              <a href="{% url "lista_calles" %}" class="nav-link {% if seccion == 'calles-list' %}active {% endif %}">
                <i class="far fa-circle nav-icon"></i>
                <p>Calles</p>
              </a>
            </li>
         
            

          </ul>
          </li>
          {% endif %}

          {% if 'Coordinador General' in user_groups  %}


          <li class="nav-item {% if navbar == 'gestion_user' %}menu-is-opening menu-open{% endif %}">
            <a href="#" class="nav-link {% if navbar == 'gestion_user' %}active first-li{% endif %}">
              <i class="nav-icon fas fa-users"></i>
              <p>
                Gestión de Usuarios
                <i class="right fas fa-angle-left"></i>
              </p>
            </a>
            

            <ul class="nav nav-treeview">
                <li class="nav-item">
                  <a href="{% url "UserListViewCordiPromo"  %}" class="nav-link {% if seccion == 'ver_promotores' %}active {% endif %}">
                    <i class="far fa-circle nav-icon"></i>
                    <p>Ver Promotores</p>
                  </a>
                </li>
            </ul>
          </li>




          <li class="nav-item {% if navbar == 'estadisticas' %}menu-is-opening menu-open{% endif %}">
          <a href="#" class="nav-link {% if navbar == 'estadisticas' %}active first-li{% endif %}">
            <i class="nav-icon fas fa-chart-pie"></i>  
              <p>
              Estadisticas
              <i class="fas fa-angle-left right"></i>
            </p>
          </a>
          <ul class="nav nav-treeview">
            <li class="nav-item">
              <a href="{% url "estadisticas" %}" class="nav-link {% if seccion == 'esta_general' %}active {% endif %}">
                <i class="far fa-circle nav-icon"></i>
                <p>Generales</p>
              </a>
            </li>
         
          </ul>
          <ul class="nav nav-treeview">
            <li class="nav-item">
              <a href="{% url "estadisticasSolicitud" %}" class="nav-link {% if seccion == 'esta_soli' %}active {% endif %}">
                <i class="far fa-circle nav-icon"></i>
                <p>Solicitudes y Problemas</p>
              </a>
            </li>
         
          </ul>
          <ul class="nav nav-treeview">
            <li class="nav-item">
              <a href="{% url "lista-cumple" %}" class="nav-link {% if seccion == 'cumple' %}active {% endif %}">
                <i class="far fa-circle nav-icon"></i>
                <p>Cumpleaños</p>
              </a>
            </li>

            <li class="nav-item">
              <a href="" class="nav-link {% if seccion == '' %}active {% endif %}">
                <i class="far fa-circle nav-icon"></i>
                <p>Secciones</p>
              </a>
            </li>

            <li class="nav-item">
              <a href="{% url "lista_calles" %}" class="nav-link {% if seccion == 'calles-list' %}active {% endif %}">
                <i class="far fa-circle nav-icon"></i>
                <p>Calles</p>
              </a>
            </li>
         
          </ul>
          </li>
          {% endif %}
          {% if 'Promotor' in user_groups  %}


          {% endif %}

          <li class="nav-item {% if navbar == 'promovidos' %}menu-is-opening menu-open{% endif %}">
            <a href="#" class="nav-link {% if navbar == 'promovidos' %}active first-li{% endif %}">
              <i class="nav-icon fas fa-id-card"></i>
              <p>
                Gestión de Aspirantes
                <i class="fas fa-angle-left right"></i>
              </p>
            </a>
            <ul class="nav nav-treeview">

              <li class="nav-item">
                <a href="{% url "lista_prospectos" %}" class="nav-link {% if seccion == 'ver_prospectos' %}active {% endif %}">
                  <i class="far fa-circle nav-icon"></i>
                  <p>Prospectos</p>
                </a>
              </li>

              <li class="nav-item">
                <a href="{% url "lista_promovidos" %}" class="nav-link {% if seccion == 'ver_promovidos' %}active {% endif %}">
                  <i class="far fa-circle nav-icon"></i>
                  <p>Promovidos</p>
                </a>
              </li>

              <li class="nav-item">
                <a href="{% url "lista_votos_seguros" %}" class="nav-link {% if seccion == 'ver_votos_seguro' %}active {% endif %}">
                  <i class="far fa-circle nav-icon"></i>
                  <p>Votos Seguros</p>
                </a>
              </li>

              <li class="nav-item">
                <a href="{% url "lista-promovidos-verificar" %}" class="nav-link {% if seccion == 'veri_promovidos' %}active {% endif %}">
                  <i class="far fa-circle nav-icon"></i>
                  {% if  es_administrador or  es_coordinador_area or es_coordinador_general%}
                  <p>Verificados</p>

                  {% else %}
                  <p>Verificados</p>

                  {% endif %}
                </a>
              </li>
            </ul>
          </li>


          <li class="nav-item {% if navbar == 'mapa' %}menu-is-opening menu-open{% endif %}">
            <a href="#" class="nav-link {% if navbar == 'mapa' %}active first-li{% endif %}">
              <i class="nav-icon fas fa-map-marked-alt"></i>
              <p>
                Mapa
                <i class="fas fa-angle-left right"></i>
              </p>
            </a>
            <ul class="nav nav-treeview">

              <li class="nav-item">
                <a href="{% url "mapa" %}" class="nav-link {% if seccion == 'mapa_promo' %}active {% endif %}">
                  <i class="far fa-circle nav-icon"></i>
                  <p>Promovidos</p>
                </a>
              </li>

              <li class="nav-item">
                <a href="{% url "mapa-voto-seguro" %}" class="nav-link {% if seccion == 'mapa_segu' %}active {% endif %}">
                  <i class="far fa-circle nav-icon"></i>
                  <p>Votos seguros</p>
                </a>
              </li>

              <li class="nav-item">
                <a href="{% url "MapaVerificadosView" %}" class="nav-link {% if seccion == 'mapa_verifi' %}active {% endif %}">
                  <i class="far fa-circle nav-icon"></i>
                  <p>Verificados</p>
                </a>
              </li>




            </ul>
          </li>

          <li class="nav-item {% if navbar == 'publicidad' %}menu-is-opening menu-open{% endif %}">
            <a href="#" class="nav-link {% if navbar == 'publicidad' %}active first-li{% endif %}">
              <i class="nav-icon fa-solid fa-paper-plane"></i>              <p>
                Publicidad
                <i class="fas fa-angle-left right"></i>
              </p>
            </a>
            <ul class="nav nav-treeview">
              <li class="nav-item">
                <a href="{% url "mapapublicidad" %}" class="nav-link {% if seccion == 'ver_publicidad' %}active {% endif %}">
                  <i class="far fa-circle nav-icon"></i>
                  <p>Ver acciones de publicidad</p>
                </a>
              </li>
           
            </ul>
          </li>

          <li class="nav-item {% if navbar == 'votos' %}menu-is-opening menu-open{% endif %}">
            <a href="#" class="nav-link {% if navbar == 'votos' %}active first-li{% endif %}" onclick="mostrarAlertaActualizacion();">
              <i class="nav-icon fa-solid fa-check-to-slot"></i>
              <p>
                Votación
                <span class="right badge badge-danger">Proximamente</span>

              </p>
            </a>

            
          </li>
          <li class="nav-item {% if navbar == 'agenda' %}menu-is-opening menu-open{% endif %}">
            <a href="#" class="nav-link {% if navbar == 'agenda' %}active first-li{% endif %}" onclick="mostrarAlertaActualizacion();">
              <i class="nav-icon fa-solid fas fa-calendar-alt"></i>              <p>
                Agenda
                <span class="right badge badge-danger">Proximamente</span>
              </p>
            </a>
            {% comment %} <ul class="nav nav-treeview">
              <li class="nav-item">
                <a href="{% url "calendarapp:calendar" %}" class="nav-link {% if seccion == 'miAgenda' %}active {% endif %}">
                  <i class="far fa-circle nav-icon"></i>
                  <p>Ver mi Agenda</p>
                </a>
              </li>
           
            </ul> {% endcomment %}
          </li>

          {% if 'Candidato' in user_groups   %}
           <li class="nav-item {% if navbar == 'check_config' %}menu-is-opening menu-open{% endif %}">
            <a href="#" class="nav-link {% if navbar == 'configuracion' %}active first-li{% endif %}">
              <i class="nav-icon fa-solid fas fa-cog"></i>              <p>
                Configuración
                <i class="fas fa-angle-left right"></i>
              </p>
            </a>
            <ul class="nav nav-treeview">
              <li class="nav-item">
                <a href="{% url 'check_config'%} " class="nav-link {% if seccion == 'ver_configuracion' %}active {% endif %}">
                  <i class="far fa-circle nav-icon"></i>
                  <p>Ver Configuración</p>
                </a>
              </li>
   
            </ul>
          </li>
          {% endif %}
        </ul>
      </nav>
      <!-- /.sidebar-menu -->
    </div>
    <!-- /.sidebar -->
  </aside>

  <!-- Content Wrapper. Contains page content -->
  <div class="content-wrapper">
    <!-- Content Header (Page header) -->
    <div class="content-header">
      <div class="container-fluid">
        <div class="row mb-2">
          <div class="col-sm-8">
            {% block dashboard %}
              
            {% endblock dashboard %}  
          </div><!-- /.col -->
          <div class="col-sm-4 editcolor">
            <ol class="breadcrumb float-sm-right">
      
            </ol>
          </div><!-- /.col -->
        </div><!-- /.row -->
      </div><!-- /.container-fluid -->
    </div>
    <!-- /.content-header -->

    <!-- Main content -->
    <section class="content">
      <div class="container-fluid">
      {% block completar_usuario %}
  
        {% if user.is_authenticated and not user_profile_complete %}
        {% endif %}
      {% endblock %}
        {% block contenido %}
          
        {% endblock contenido %}
      </div><!-- /.container-fluid -->
    </section>
    <!-- /.content -->
  </div>
  <!-- /.content-wrapper -->
  <footer class="main-footer">
    <strong>Copyright &copy; 2023-2026 <a href="https://wwww.skysoft.mx">SkySoft</a>.</strong>
    All rights reserved.
    <div class="float-right d-none d-sm-inline-block">
      <b>Version</b> 3.2.0
    </div>
  </footer>

  <!-- Control Sidebar -->
  <aside class="control-sidebar control-sidebar-dark">
    <!-- Control sidebar content goes here -->
  </aside>
  <!-- /.control-sidebar -->
</div>
<!-- ./wrapper -->

<!-- jQuery -->


{% block script1 %}
<script src="{% static "plugins/jquery/jquery.min.js" %}"></script>
<!-- jQuery UI 1.11.4 -->
<script src="{% static "plugins/jquery-ui/jquery-ui.min.js" %}"></script>
<script src="{% static "js/jquery-ui.min.js" %}"></script>

<!-- Resolve conflict in jQuery UI tooltip with Bootstrap tooltip -->
<script>
  $.widget.bridge('uibutton', $.ui.button)
</script>
<!-- Bootstrap 4 -->
<script src="{% static 'js/bootstrap.bundle.min.js' %}"></script>
<!-- ChartJS -->
<script src="{% static "plugins/chart.js/Chart.min.js" %}"></script>
<!-- Sparkline -->
<script src="{% static "plugins/sparklines/sparkline.js" %}"></script>
<!-- JQVMap -->
<script src="{% static "plugins/jqvmap/jquery.vmap.min.js" %}"></script>
<script src="{% static "plugins/jqvmap/maps/jquery.vmap.usa.js" %}"></script>
<!-- jQuery Knob Chart -->
<script src="{% static "plugins/jquery-knob/jquery.knob.min.js" %}"></script>
<!-- daterangepicker -->
<script src="{% static "plugins/moment/moment.min.js" %}"></script>
<script src="{% static "plugins/daterangepicker/daterangepicker.js" %}"></script>
<!-- Tempusdominus Bootstrap 4 -->
<script src="{% static "plugins/tempusdominus-bootstrap-4/js/tempusdominus-bootstrap-4.min.js" %}"></script>
<!-- Summernote -->
<script src="{% static "plugins/summernote/summernote-bs4.min.js" %}"></script>
<!-- overlayScrollbars -->
<script src="{% static "plugins/overlayScrollbars/js/jquery.overlayScrollbars.min.js" %}"></script>
<!-- AdminLTE App -->
<script src="{% static "dist/js/adminlte.js" %}"></script>
<script src="{% static 'js/demo.js' %}"></script>
<script src="{% static 'js/Chart.min.js' %}"></script>

<script src="{% static "dist/js/pages/dashboard.js" %}"></script>


<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>  

<!-- ----------------DATATABLES-------------------------- -->
<script src="https://code.jquery.com/jquery-3.7.0.js"></script>
<script src="https://cdn.datatables.net/1.13.6/js/jquery.dataTables.min.js"></script>
<script src="https://cdn.datatables.net/1.13.6/js/dataTables.bootstrap5.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/pdfmake.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/vfs_fonts.js"></script>
<script src="https://cdn.datatables.net/v/bs5/jq-3.7.0/jszip-3.10.1/dt-1.13.6/b-2.4.2/b-html5-2.4.2/b-print-2.4.2/datatables.min.js"></script>
<script>
  $("#tabla").DataTable({
    {% block filtro %}

    {% endblock filtro %}
      paging: true,
      lengthMenu: [5, 10, 25, 50, 100], // Cambiamos el menú de longitud para incluir 5 entradas
      pageLength:5,
      lengthChange :true,
      autoWidth: true,
      searching: true,
      bInfo: true,
      bSort: true,
      {% block dom %}
      dom: 'Bfrltip',
      {% endblock dom %}
      buttons:[
        {% block datatable %}

        
        {% endblock datatable %}        
        
        {% block datatable2 %}
        {extend: 'copy',
        text: '<i class="fas fa-clone"></i>',
        class: 'btn btn-secondary',
        titleAttr: 'Copiar a Documento',
        exportOptions:{
            columns:[0,1,2]
        }
        },
        {extend: 'excel',
        text: '<i class="fas fa-file-excel"></i>',
        class: 'btn btn-secondary',
        titleAttr: 'Exportar a Excel',
        exportOptions:{
            columns:[0,1,2]
        }
        },
        {extend: 'print',
        text: '<i class="fas fa-print"></i>',
        class: 'btn btn-secondary',
        titleAttr: 'Imprimir',
        exportOptions:{
            columns:[0,1,2]
        }
        },
        {% endblock datatable2 %}
      ],
      "language": {
                  "sProcessing": "Procesando...",
                  "sLengthMenu": "Mostrar _MENU_ Registros",
                  "sZeroRecords": "No se encontraron resultados",
                  "sEmptyTable": "Ningún dato disponible en esta tabla",
                  "sInfo": "Mostrando registros del _START_ al _END_ de un total de _TOTAL_ registros",
                  "sInfoEmpty": "Mostrando registros del 0 al 0 de un total de 0 registros",
                  "sInfoFiltered": "(filtrado de un total de _MAX_ Registros)",
                  "sSearch": "Buscar:",
                  "sInfoThousands": ",",
                  "sLoadingRecords": "Cargando...",
                  "oPaginate": {
                      "sFirst": "Primero",
                      "sLast": "Último",
                      "sNext": "Siguiente",
                      "sPrevious": "Anterior"
                  },
                  "oAria": {
                      "sSortAscending": ": Activar para ordenar la columna de manera ascendente",
                      "sSortDescending": ": Activar para ordenar la columna de manera descendente"
                  },
                  "buttons": {
                      "copy": "Copiar",
                      "colvis": "Visibilidad"
                  }
              },

  });
  
</script>

    
  {% block script  %}
    
  {% endblock script  %}

<script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>






{% endblock script1 %}


{% block script2 %}

{% endblock script2 %}

<script src="//cdn.jsdelivr.net/npm/sweetalert2@11"></script>

<script>
  $(function() {
    setTimeout(function() {
      var Toast = Swal.mixin({
        toast: true,
        position: 'top-end',
        showConfirmButton: false,
        timer: 3000
      });

      {% for message in messages %}
        {% if message.tags == "success" %}
          Toast.fire({
            icon: 'success',
            title: '{{ message }}'
          });
        {% elif message.tags == "error" %}
          Swal.fire({
            icon: 'error',
            title: 'Oops...',
            text: "{{ message }}",
            confirmButtonColor: '#2A4B41'
          });
          {% elif message.tags == "warning" %}
          Swal.fire({
            icon: 'warning',
            title: 'Acción denegada',
            text: "{{ message }}",
            confirmButtonColor: '#2A4B41'
          });
        {% endif %}
      {% endfor %}
    }, 500); // 500 milisegundos (medio segundo)
  });
</script>

<!-- En tu plantilla base o donde sea necesario -->
{% comment %} <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script> {% endcomment %}

<script>
  // Detectar inactividad y mostrar un mensaje con SweetAlert
  $(document).ready(function() {
    var inactivityTimeout = 600000;  // 10 minutos en milisegundos

    function showSessionExpiredMessage() {
      Swal.fire({
        icon: 'warning',
        title: 'Tu sesión ha expirado',
        text: 'Por favor, vuelve a iniciar sesión.',
        confirmButtonText: 'OK',
        allowOutsideClick: false,
      }).then((result) => {
        if (result.isConfirmed) {
          window.location.href = "{% url 'login' %}";  // Redirigir a la página de inicio de sesión
        }
      });
    }

    var timeout;

    function resetTimeout() {
      clearTimeout(timeout);
      timeout = setTimeout(showSessionExpiredMessage, inactivityTimeout);
    }

    $(document).on('mousemove keydown scroll', resetTimeout);

    resetTimeout();  // Iniciar el temporizador cuando la página se carga
  });

  function mostrarAlertaActualizacion() {
    Swal.fire({
        title: 'En Desarrollo',
        text: 'Estamos trabajando en esta actualización.',
        icon: 'info',
        confirmButtonText: 'Entendido'
    });
}
</script>

</body>
</html>
